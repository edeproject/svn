#
# $Id$
#
# Part of Equinox Desktop Environment (EDE).
# Copyright (c) 2000-2007 EDE Authors.
#
# This program is licensed under terms of the 
# GNU General Public License version 2 or newer.
# See COPYING for details.

# tools used by jam rules
XGETTEXT     ?= xgettext ;
MSGFMT       ?= msgfmt ;
RMDIR_UNSAFE ?= $(RM) -Rf ;
RMDIR_SAFE   ?= rmdir ;
CP           ?= cp ;
COPYDIR      ?= "cp -R" ;
MV           ?= mv ;
MKDIRS       ?= "mkdir -p" ;
LINKCMD      ?= "ln -s" ;

# directories where data will be installed
PREFIX        ?= "/opt/ede2" ;
EDEBINDIR     ?= "$(PREFIX)/bin" ;
EDECONFIGDIR  ?= "$(PREFIX)/data/config" ;
EDEICONDIR    ?= "$(PREFIX)/data/icons" ;
EDEDESKTOPDIR ?= "$(PREFIX)/data/desktop" ;
EDEMIMEDIR    ?= "$(PREFIX)/share/mime" ;
EDEDOCDIR     ?= "$(PREFIX)/share/doc/ede-2.0.0" ;

# global flags used to be passed to every target
GLOBALFLAGS  ?= -Wall -pedantic -g3 -D_DEBUG -I$(TOP) ;
STDLIB       ?= -lstdc++ ;

# Note that REMOVE_UNUSED_DEPENDENCIES_TRICK _does not_ works when
# edelib is compiled as shared library
REMOVE_UNUSED_DEPENDENCIES_TRICK = 1 ;

# edelib libraries path
EDELIBINCLUDE ?= -I/opt/ede/include ;
EDELIBLIB     ?= -L/opt/ede/lib -ledelib ;

# fltk libraries path
FLTKINCLUDE      ?= -I/usr/local/include ;
FLTKLIB          ?= -L/usr/local/lib -lfltk_images -lpng -lz -ljpeg -lfltk -ldl -lm -lXext -lXft -lX11 -lXpm ;
FLTKLIB_NOIMAGES ?= -L/usr/local/lib -lfltk -ldl -lm -lXext -lXft -lX11 ;

# backward; efltk libraries path
EFLTKINCLUDE       ?= -I/usr/local/include ;
EFLTKLIB           ?= -L/usr/local/lib -lefltk_images -lpng -lz -ljpeg -lefltk -lX11 -lXext -lm ;
EFLTKLIB_NOIMAGES  ?= -L/usr/local/lib -lefltk -lX11 -lXext -lm ;

# by default all flags that jam uses directly are cleared
# here should _not_ be set anything since they are filled per target
CCFLAGS = ;
C++FLAGS = ;
OPTIM = ;

# only haiku jam
JCACHEFILE = $(TOP)/.jamcache ;
HCACHEFILE = $(TOP)/.jamhcache ;

include $(TOP)/build/Utils.jam ;
include $(TOP)/build/Library.jam ;
include $(TOP)/build/Program.jam ;
include $(TOP)/build/Translation.jam ;
include $(TOP)/build/Install.jam ;
include $(TOP)/build/Doc.jam ;
include $(TOP)/build/Svg.jam ;

BUILD_ICON_THEMES ?= ;

actions quietly Help 
{
	echo ""
	echo "Build options:"
	echo "   jam                build all"
	echo "   jam  clean         clean compiled and created data"
	echo "   jam  distclean     clean all compiled and created data (development only)"
	echo "   jam  [target]      build [target] only"
	echo "   jam  translation   extract translation strings and compile existing"
	echo "   jam  potfile       extract translation strings only"
	echo "   jam  doc           build documentation"
	echo "   jam  help          this help"
	echo ""
	echo "   jam -sBUILD_ICON_THEMES=1 build icon themes (not built by default)"
	echo ""
}

Help help ;
NotFile help ;
Always help ;
